<Style>
    @media all and (min-width: 0px) and (max-width: 767px) {
        .modal-body {
            padding-left:3px !important;
            padding-right:3px !important;
        }

        .modal-dialog {
            margin:0px !important;
        }

        .occupancy .heading {
            text-align: right;padding:0px 2px !important;
        }

        .occupancy TD B {
            font-size:11px;
        }

        .tiny {
            font-size:9px
        }

        .col-spacer {
            width:10px !important;
        }

        .heading div, .moreinfo .moreinforow {
            height: 28px
        }

    }

    .survey-value {
        max-width:60px;min-width:48px;height:25px;display: inline;padding-left:2px;padding-right:5px;text-align:right;padding-top:5px
    }

    .survey-values tr {
        height:36px
    }

    .survey-values.heading tr {
        height:inherit !important;
    }

    .occupancy .heading {
        text-align: right;padding:0px 7px
    }

    .survey-values .form-group {
        margin-bottom: 0px;
    }


    .survey-values .fa-undo {
        padding-left: 5px;
    }

    .survey-values TH {
        font-size:13px !important;

    }

    .col-spacer {
        width:20px;
    }

    .radio.disabled label {
        opacity: .5;
    }

    .heading div, .moreinfo .moreinforow {
        height: 26px
    }

    .popover-inner UL {
        margin-left:-30px;
    }

    .popover-inner UL LI:before {
        font-family: 'FontAwesome';
        content: '\f071';
        margin:0 1px 0 -15px;
        color: red;
    }
    .popover-inner UL LI {
        list-style: none;
        margin-top:10px
    }

    .popover-inner UL LI span {
        position: relative; left: 4px;
        color: red;
    }

    .popover-inner UL.warn LI:before,
    .popover-inner UL.warn LI span {
        color:orange;
    }
    .has-error .form-control {
        background-color:#FFF0F0;
    }

    .has-warning .form-control {
        background-color:#ffe5cb;
        border: 1px solid #f90 !important;
    }

</Style>

<div ng-show="!localLoading" style="display:block;width:100px;margin:50px auto">
    <img src="/images/squares.gif" style="width:100px">
</div>
<div ng-show="localLoading && (survey.floorplans && survey.floorplans.length > 0)">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button>
        <h2 class="modal-title">Property Survey: {{property.name}}</h2>
    </div>
    <div class="modal-body" style="padding:0px 14px 14px 14px">
        <div ng-show="hasContact" style="color:#777">
            <b>Contact: </b>
            <span ng-show="hasName"> {{property.contactName}}</span>
            <span ng-show="hasEmail"> {{property.contactEmail}}</span>
            <span ng-show="hasPhone"> {{property.phone}}</span>
        </div>

        <hr style="margin:14px 0px;border-color:#4460a9">

        <div ng-if="showGuests">
            <div ng-class="{'radio' : true, disabled: false}">
                <label style="font-weight:bold"><input type="radio" ng-model="swap.who" value="manual"> Manual Property Survey</label> <i style="font-size:12px;"> - Last Survey: <a href style="font-size:12px;" popover-trigger="'mouseenter'" popover-placement="top" popover-append-to-body="true" uib-popover-html="showDateHover(survey.survey_date)">{{showDate(survey.survey_date)}}</a></i><Br>
            </div>
            <div ng-class="{'radio' : true}" style="padding-top:10px">
                <label style="font-weight:bold;"><input type="radio" ng-model="swap.who" value="swap"> Send SurveySwap</label> <i style="font-size:12px;"> - Last Emailed: <a href style="font-size:12px;" popover-trigger="'mouseenter'" popover-placement="top" popover-append-to-body="true" uib-popover-html="showDateHover(swap.selectedGuest.lastEmailed)">{{showDate(swap.selectedGuest.lastEmailed)}}</a></i><Br>
                <Div style="height:5px"></Div>
                    <span style="width:20px;display:inline-block"></span>Contact: <select ng-options="guest.first + ' ' + guest.last + ' ('+ guest.email +')' for guest in swap.guests" ng-model="swap.selectedGuest" class="form-control input-sm" style="display: inline-block;max-width:250px"></select>
                    <i class="fa fa-question-circle"
                       style="cursor:pointer;font-size:14px;padding-left:2px;"
                       popover-trigger="'mouseenter'"
                       popover-placement="right"
                       popover-append-to-body="true"
                       uib-popover-html="getGuestInfo(swap.selectedGuest)"
                       ng-if="!swap.selectedGuest.bounceReason"
                    ></i>

                    <i class="fa fa-exclamation-triangle warning"
                       style="cursor:pointer;font-size:14px;padding-left:2px;color:orange"
                       ng-if="swap.selectedGuest.bounceReason"
                       popover-trigger="'mouseenter'"
                       popover-placement="right"
                       popover-append-to-body="true"
                       popover-class="popover-small"
                       uib-popover-html="getGuestInfoBounce(swap.selectedGuest)"
                    ></i>

                <Br>
            </div>
            <Br>
            <div style="text-align: center">
                <button class="btn btn-success contact-submit" ng-click="surveyWhoSelector()">Next</button>
            </div>
        </div>
        <div ng-if="!showGuests">
            <div class="alert alert-warning" ng-if="editMode">
                <b>Note:</b> You are modifying historical data of a Property Survey taken on <b>{{editDate | date : 'shortDate'}}</b>
            </div>

            <toggle-switch checked="settings.showDetailed" click-fn="toggleConcessions()" style="margin-left:30px;"  disabled="!me.orgs[0].settings.detailed_concessions.allow" popover="me.orgs[0].settings.detailed_concessions.allow ? '' : 'This setting has been locked by your company administrator.'"></toggle-switch>&nbsp;&nbsp;Detailed Concessions
            <i class="fa fa-question-circle"  style="font-size:12px"
            popover-trigger="'mouseenter'"
            popover-placement="bottom"
               uib-popover="Turn on detailed concessions if you want to input one-time and monthly concessions separately rather than a single total value over 12 months"
        ></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <div class="visible-xs"></div>
            <span class="visible-xs-inline-block" style="width:30px;"></span><toggle-switch checked="settings.showNotes" click-fn="toggleNotes()"></toggle-switch>&nbsp;&nbsp;Property Survey Notes<br>
            <div style="margin-top:10px"></div>
            <div ng-if="settings.showNotes">
            <textarea class="form-control" placeholder="Type Property Survey notes here" ng-model="survey.notes" ng-keydown="updateChanged()"></textarea><br>
            </div>
            <table class="table table-condensed table-striped table-hover survey-values hidden-arrows sortablegrid" style="margin-bottom:10px">
                <tbody>
                <tr class="thead">
                    <th class="sortable" ng-click="toggleSort('type',true)"><span class="hidden-xs">Type</span><span class="visible-xs-inline">Type</span>
                        <i ng-show="sort.indexOf('type') == -1" class="fa fa-sort"></i>
                        <i ng-show="sort == '-type'" class="fa fa-sort-down"></i>
                        <i ng-show="sort == 'type'" class="fa fa-sort-up"></i>
                    </th>
                    <th class="hidden-xs sortable" ng-click="toggleSort('description',true)">
                        Desc.
                        <i ng-show="sort.indexOf('description') == -1" class="fa fa-sort"></i>
                        <i ng-show="sort == '-description'" class="fa fa-sort-down"></i>
                        <i ng-show="sort == 'description'" class="fa fa-sort-up"></i>
                    </th>
                    <th class="hidden-xs sortable" style="text-align: right" ng-click="toggleSort('units',true)"><span class="hidden-xs">Units</span><span class="visible-xs">#</span>

                        <i ng-show="sort.indexOf('units') == -1" class="fa fa-sort"></i>
                        <i ng-show="sort == '-units'" class="fa fa-sort-down"></i>
                        <i ng-show="sort == 'units'" class="fa fa-sort-up"></i>

                    </th>
                    <th class="hidden-xs sortable" style="text-align: right" ng-click="toggleSort('sqft',true)">
                        Sqft
                        <i ng-show="sort.indexOf('sqft') == -1" class="fa fa-sort"></i>
                        <i ng-show="sort == '-sqft'" class="fa fa-sort-down"></i>
                        <i ng-show="sort == 'sqft'" class="fa fa-sort-up"></i>
                    </th>
                    <th style="white-space: nowrap;text-align:right">Rent <i class="fa fa-question-circle" style="font-size:12px"
                     popover-trigger="'mouseenter'"
                     popover-placement="left"
                                                                             uib-popover="Enter the base (minimum) gross floor plan rent for a 12 month lease, before any concessions or discounts. If the floor plan does not have any units available, enter the expected market rent."
                            ></i></th>
                    <th ng-if="!settings.showDetailed" style="white-space: nowrap;text-align:right">Concess. <i class="fa fa-question-circle"  style="font-size:12px"
                     popover-trigger="'mouseenter'"
                     popover-placement="left"
                                                                                                                uib-popover="Enter the total offered rent discount (one-time and recurring) over a 12 month lease term. Includes one-time concession, Look-and-Lease special, amortized concession, or any other rent discount offered over a 12 month lease term. Ex: $100 off per month, enter as $1,200 value, or $500 look-and-lease for signing a 12 month lease, enter as $500. If both concessions are offered, enter $1700 ($1200 + $500). For any waived fees, please enter under Fees & Deposits."
                            ></i><Br>
                    <div style="font-size:8pt;font-weight:normal;">(Total)</div></th>

                    <th ng-if="settings.showDetailed" style="white-space: nowrap;text-align:right">Concess. <i class="fa fa-question-circle"  style="font-size:12px"
                                                                                                               popover-trigger="'mouseenter'"
                                                                                                               popover-placement="left"
                                                                                                               uib-popover="Enter one-time (upfront) concessions or look-and-lease specials. Ex: Enter '500' if $500 discount is offered as a look-and-lease special. For any waived fees, please enter under Fees & Deposits."
                    ></i><Br>
                        <div style="font-size:8pt;font-weight:normal;">(One-Time)</div></th>

                    <th ng-if="settings.showDetailed" style="white-space: nowrap;text-align:right">Concess. <i class="fa fa-question-circle"  style="font-size:12px"
                                                                                                               popover-trigger="'mouseenter'"
                                                                                                               popover-placement="left"
                                                                                                               uib-popover="Enter monthly (recurring) concession. Ex: Enter '100' if $100 off per month is offered in concession. For any waived fees, please enter under Fees & Deposits."
                    ></i><Br>
                        <div style="font-size:8pt;font-weight:normal;">(Monthly)</div></th>
                    <th style="width:55px">

                    </th>
                </tr>

                <tr ng-repeat="row in survey.floorplans | orderBy : getOrder(sort)">
                    <td style="white-space: nowrap;">
                        {{row.bedrooms}}x{{row.bathrooms}}
                        <div class="visible-xs tiny">{{row.units}} Units</div>
                        <div class="visible-xs tiny">{{row.sqft}} Sqft</div>
                    </td>
                    <td class="hidden-xs" style="word-break: break-all">
                        {{row.description}}
                    </td>
                    <td class="hidden-xs pad" style="text-align: right">
                        {{row.units}}
                    </td>
                    <td class="hidden-xs pad" style="text-align: right">
                        {{row.sqft}}
                    </td>
                    <td style="white-space: nowrap;text-align:right;">
                        <div ng-class="{'form-group': true, 'has-error': !!row.errors.rent || !!row.errors.ner, 'has-warning': getWarnings(row) && !getErrors(row)}">
                            $<input type="number" min="1" class="form-control input-sm survey-value" ng-model="row.rent" input-mask="9{1,5}" ng-enter="next(row,'rent-' + row.id)" id="rent-{{row.id}}" onclick="select()" ng-change="clear('rent-' + row.id)" ng-keydown="pressed(row,'rent-' + row.id, $event)" ng-blur="updateDone(row,true,'rent')">
                        </div>
                    </td>
                    <td ng-if="!settings.showDetailed" style="white-space: nowrap;text-align:right">
                        <div ng-class="{'form-group': true, 'has-error': !!row.errors.concessions || !!row.errors.ner, 'has-warning': getWarnings(row) && !getErrors(row)}">
                            $<input type="number" min="0" class="form-control input-sm survey-value" ng-model="row.concessions"  input-mask="9{1,5}" ng-enter="next(row,'concessions-' + row.id)" id="concessions-{{row.id}}" onclick="select()" ng-change="clear('concessions-' + row.id)" ng-keydown="pressed(row,'concessions-' + row.id, $event)" ng-blur="updateDone(row,true,'concessions')">
                        </div>
                    </td>
                    <td ng-if="settings.showDetailed" style="white-space: nowrap;text-align:right">
                        <div ng-class="{'form-group': true, 'has-error': !!row.errors.concessionsOneTime || !!row.errors.ner, 'has-warning': getWarnings(row) && !getErrors(row)}">
                            $<input type="number" min="0" class="form-control input-sm survey-value" ng-model="row.concessionsOneTime"  input-mask="9{1,5}" ng-enter="next(row,'concessionsOneTime-' + row.id)" id="concessionsOneTime-{{row.id}}" onclick="select()" ng-change="clear('concessionsOneTime-' + row.id)" ng-keydown="pressed(row,'concessionsOneTime-' + row.id, $event)" ng-blur="updateDone(row,true,'concessionsOneTime')">
                        </div>
                    </td>
                    <td ng-if="settings.showDetailed" style="white-space: nowrap;text-align:right">
                        <div ng-class="{'form-group': true, 'has-error': !!row.errors.concessionsMonthly || !!row.errors.ner, 'has-warning': getWarnings(row) && !getErrors(row)}">
                            $<input type="number" min="0" class="form-control input-sm survey-value" ng-model="row.concessionsMonthly"  input-mask="9{1,5}" ng-enter="next(row,'concessionsMonthly-' + row.id)" id="concessionsMonthly-{{row.id}}" onclick="select()" ng-change="clear('concessionsMonthly-' + row.id)" ng-keydown="pressed(row,'concessionsMonthly-' + row.id, $event)" ng-blur="updateDone(row,true,'concessionsMonthly')">
                        </div>
                    </td>
                    <td nowrap>
                        &nbsp;<a href ng-click="undo(row)" ng-if="row.updated" class="pull-left"><i class="fa fa-undo" uib-tooltip="Undo"></i></a>
                        <i ng-if="getWarnings(row) && !getErrors(row)" class="fa fa-exclamation-triangle pull-right" style="color:orange;margin-top:3px"
                           popover-trigger="'mouseenter'"
                           popover-placement="left"
                           uib-popover-html="getWarnings(row)"
                        ></i>
                        <i ng-if="getErrors(row)" class="fa fa-exclamation-triangle pull-right" style="color:red;margin-top:3px"
                           popover-trigger="'mouseenter'"
                           popover-placement="left"
                           uib-popover-html="getErrors(row)"
                        ></i>
                    </td>
                </tr>

                </tbody>
                <tfoot>
                    <tr style="font-weight: bold;">
                        <td class="visible-xs">
                            Totals/Avgs:
                            <div class="visible-xs tiny">{{totals.units}} Units</div>
                            <div class="visible-xs tiny">{{totals.sqft | number: 0}} Sqft</div>
                        </td>
                        <td class="hidden-xs" colspan="2">
                            Totals/Averages:
                        </td>
                        <td class="hidden-xs pad" style="text-align: right">
                            {{totals.units}}
                        </td>
                        <td class="hidden-xs pad" style="text-align: right">
                            {{totals.sqft | number: 0}}
                        </td>
                        <td style="text-align: right; padding-right: 10px">
                            ${{totalRent() | number: 0}}
                        </td>
                        <td ng-if="!settings.showDetailed" style="text-align: right; padding-right: 10px">
                            ${{totalConcessions() | number: 0}}
                        </td>
                        <td ng-if="settings.showDetailed" style="text-align: right; padding-right: 10px">
                            ${{totalConcessionsOneTime() | number: 0}}
                        </td>
                        <td ng-if="settings.showDetailed" style="text-align: right; padding-right: 10px">
                            ${{totalConcessionsMonthly() | number: 0}}
                        </td>
                        <td>
                        </td>
                    </tr>
                </tfoot>
                </table>

                <Center>
                    <table class="survey-values occupancy">
                        <tbody>
                        <tr>
                            <td class="heading" valign="top">
                                <div><b>Occupancy %</b></div>
                                <Br ng-if="$root.me.settings.showLeases || survey.leased">
                                <div ng-if="$root.me.settings.showLeases || survey.leased"><b>Leased %</b></div>
                                <Br ng-if="$root.me.settings.showRenewal || survey.renewal">
                                <div ng-if="$root.me.settings.showRenewal || survey.renewal"><b>Renewal %</b></div>

                            </td>
                            <td style="text-align: right" valign="top">
                                <div ng-class="{'form-group': true, 'has-error': getErrors(validation.occupancy), 'has-warning': getWarnings(validation.occupancy) && !getErrors(validation.occupancy)}">
                                    <input type="number" min = "0" max="100" class="form-control input-sm survey-value" ng-model="survey.occupancy"   ng-enter="next('occupancy','occupancy')" id="occupancy" onclick="select()" ng-change="clear('occupancy')" ng-keydown="pressed('occupancy','occupancy', $event)" ng-blur="updateDone('occupancy',true)">
                                </div>
                                <Br ng-if="$root.me.settings.showLeases || survey.leased">
                                <div ng-class="{'form-group': true, 'has-error': getErrors(validation.leased), 'has-warning': getWarnings(validation.leased) && !getErrors(validation.leased)}" ng-if="$root.me.settings.showLeases || survey.leased">
                                    <input type="number" class="form-control input-sm survey-value" ng-model="survey.leased" ng-enter="next('leased','leased')" id="leased" onclick="select()" ng-change="clear('leased')" ng-keydown="pressed('leased','leased', $event)" ng-blur="updateDone('leased',true)">
                                </div>
                                <Br ng-if="$root.me.settings.showRenewal || survey.renewal">
                                <div ng-class="{'form-group': true, 'has-error': getErrors(validation.renewal), 'has-warning': getWarnings(validation.renewal) && !getErrors(validation.renewal)}" ng-if="$root.me.settings.showRenewal || survey.renewal">
                                    <input type="number" class="form-control input-sm survey-value" ng-model="survey.renewal" ng-enter="next('renewal','renewal')" id="renewal" onclick="select()" ng-change="clear('renewal')" ng-keydown="pressed('renewal','renewal', $event)" ng-blur="updateDone('renewal',true)">
                                </div>
                            </td>

                            <td style="width:45px;" valign="top" class="moreinfo">
                                <div class="moreinforow">
                                    <a class="pull-left" href ng-click="undo('occupancy')" ng-if="survey.occupancyupdated"><i class="fa fa-undo" uib-tooltip="Undo"></i></a>
                                    <i ng-if="getWarnings(validation.occupancy) && !getErrors(validation.occupancy)" class="fa fa-exclamation-triangle pull-right" style="color:orange;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getWarnings(validation.occupancy)"
                                    ></i>
                                    <i ng-if="getErrors(validation.occupancy)" class="fa fa-exclamation-triangle pull-right" style="color:red;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getErrors(validation.occupancy)"
                                    ></i>
                                </div>
                                <Br ng-if="$root.me.settings.showLeases || survey.leased">
                                <div ng-if="$root.me.settings.showLeases || survey.leased" class="moreinforow">
                                    <a class="pull-left" href ng-click="undo('leased')" ng-if="survey.leasedupdated"><i class="fa fa-undo" uib-tooltip="Undo"></i></a>
                                    <i ng-if="getWarnings(validation.leased) && !getErrors(validation.leased)" class="fa fa-exclamation-triangle pull-right" style="color:orange;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getWarnings(validation.leased)"
                                    ></i>
                                    <i ng-if="getErrors(validation.leased)" class="fa fa-exclamation-triangle pull-right" style="color:red;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getErrors(validation.leased)"
                                    ></i>
                                </div>
                                <br ng-if="$root.me.settings.showRenewal || survey.renewal">
                                <div ng-if="$root.me.settings.showRenewal || survey.renewal" class="moreinforow">
                                    <a class="pull-left" href ng-click="undo('renewal')" ng-if="survey.renewalupdated"><i class="fa fa-undo" uib-tooltip="Undo"></i></a>
                                    <i ng-if="getWarnings(validation.renewal) && !getErrors(validation.renewal)" class="fa fa-exclamation-triangle pull-right" style="color:orange;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getWarnings(validation.renewal)"
                                    ></i>
                                    <i ng-if="getErrors(validation.renewal)" class="fa fa-exclamation-triangle pull-right" style="color:red;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getErrors(validation.renewal)"
                                    ></i>
                                </div>
                            </td>

                            <td rowspan="100%" class="col-spacer">

                            </td>

                            <td class="heading" valign="top">
                                <div ng-if="$root.me.settings.showATR || survey.atr">
                                    <b class="hidden-xs">Apts. to Rent</b>
                                    <b class="visible-xs-inline">ATR</b>
                                    <i class="fa fa-question-circle"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="top"
                                       uib-popover="Apartments to Rent – How many units do you have for rent? Enter total number of Vacant Available and On-Notice units. Ex: 5 Vacant Available Units + 6 On-Notice Units = 11 ATR"
                                       popover-append-to-body="true"
                                       style="font-size:12px"
                                    ></i>
                                </div>
                                <Br ng-if="$root.me.settings.showATR || survey.atr">

                                <div>
                                    <b class="hidden-xs">Traffic/Week</b>
                                    <b class="visible-xs">Traffic/Wk</b>
                                </div>
                                <Br>
                                <div>
                                    <b class="hidden-xs">Leases/Week</b>
                                    <b class="visible-xs">Leases/Wk</b>
                                </div>
                            </td>

                            <td style="text-align: right"  valign="top">

                                <div ng-class="{'form-group': true, 'has-error': getErrors(validation.atr), 'has-warning': getWarnings(validation.atr) && !getErrors(validation.atr)}" ng-if="$root.me.settings.showATR || survey.atr">
                                    <input type="number" min="0" class="form-control input-sm survey-value" ng-model="survey.atr" ng-enter="next('atr','atr')" id="atr" onclick="select()" ng-change="clear('atr')" ng-keydown="pressed('atr','atr', $event)" ng-blur="updateDone('atr',true)">
                                </div>
                                <Br ng-if="$root.me.settings.showATR || survey.atr">
                                <div ng-class="{'form-group': true, 'has-error': getErrors(validation.traffic), 'has-warning': getWarnings(validation.traffic) && !getErrors(validation.traffic)}">
                                    <input type="number" min="0" class="form-control input-sm survey-value" ng-model="survey.weeklytraffic" input-mask="9{1,3}" ng-enter="next('traffic','traffic')" id="traffic" onclick="select()" ng-change="clear('traffic')" ng-keydown="pressed('traffic','traffic', $event)" ng-blur="updateDone('traffic',true)">
                                </div>
                                <br>
                                <div ng-class="{'form-group': true, 'has-error': getErrors(validation.leases), 'has-warning': getWarnings(validation.leases) && !getErrors(validation.leases)}">
                                    <input type="number" min="0" class="form-control input-sm survey-value" ng-model="survey.weeklyleases"  input-mask="9{1,3}" ng-enter="next('leases','leases')" id="leases" onclick="select()" ng-change="clear('leases')" ng-keydown="pressed('leases','leases', $event)" ng-blur="updateDone('leases',true)">
                                </div>
                            </td>
                            <td style="width:45px;"  valign="top" class="moreinfo">
                                <div ng-if="$root.me.settings.showATR || survey.atr" class="moreinforow">
                                    <a class="pull-left" href ng-click="undo('atr')" ng-if="survey.atrupdated"><i class="fa fa-undo" uib-tooltip="Undo"></i></a>
                                    <i ng-if="getWarnings(validation.atr) && !getErrors(validation.atr)" class="fa fa-exclamation-triangle pull-right" style="color:orange;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getWarnings(validation.atr)"
                                    ></i>
                                    <i ng-if="getErrors(validation.atr)" class="fa fa-exclamation-triangle pull-right" style="color:red;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getErrors(validation.atr)"
                                    ></i>
                                </div>
                                <Br ng-if="$root.me.settings.showATR || survey.atr">

                                <div class="moreinforow">
                                    <a class="pull-left" href ng-click="undo('traffic')" ng-if="survey.trafficupdated"><i class="fa fa-undo" uib-tooltip="Undo"></i></a>
                                    <i ng-if="getWarnings(validation.traffic) && !getErrors(validation.traffic)" class="fa fa-exclamation-triangle pull-right" style="color:orange;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getWarnings(validation.traffic)"
                                    ></i>
                                    <i ng-if="getErrors(validation.traffic)" class="fa fa-exclamation-triangle pull-right" style="color:red;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getErrors(validation.traffic)"
                                    ></i>
                                </div>
                                <Br>
                                <div class="moreinforow">
                                    <a class="pull-left" href ng-click="undo('leases')" ng-if="survey.leasesupdated"><i class="fa fa-undo" uib-tooltip="Undo"></i></a>
                                    <i ng-if="getWarnings(validation.leases) && !getErrors(validation.leases)" class="fa fa-exclamation-triangle pull-right" style="color:orange;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getWarnings(validation.leases)"
                                    ></i>
                                    <i ng-if="getErrors(validation.leases)" class="fa fa-exclamation-triangle pull-right" style="color:red;margin-top:3px"
                                       popover-trigger="'mouseenter'"
                                       popover-placement="left"
                                       uib-popover-html="getErrors(validation.leases)"
                                    ></i>
                                </div>
                            </td>
                        </tr>

                        </tbody>
                    </table>

                    </Center>
            <Br>
            <div style="text-align: center">

            </div>

            <div class="row">
                <div class="col-sm-2">

                </div>
                <div class="col-xs-10 col-sm-8" style="text-align: center">
                    <a class="btn btn-warning contact-submit" ng-click="create()">Save Changes</a>
                </div>
                <div class="col-xs-2 col-sm-2" ng-if="editMode && ($root.me.permissions.indexOf('Admin') > -1 || property.custom.owner)">
                    <button class=" btn btn-danger btn-large contact-submit pull-right" type="button" ng-click="delete()" uib-tooltip="Delete Survey"><i class="fa fa-trash" style="color:white"></i></button>
                </div>
            </div>
        </div>

    </div>
</div>
<div ng-if="localLoading && (!survey.floorplans || survey.floorplans.length === 0)">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button>
        <h2 class="modal-title">Property Survey: {{property.name}}</h2>
        <hr style="margin:14px 0px">
    </div>
    <div class="modal-body" style="padding:14px 14px 14px 14px">
        <div class="alert alert-info" style="text-align: center;font-weight:bold">
            There are currently no floor plans set up for this property.
        </div>
        To set up floor plans: <Br>
        <ol>
            <li>Click on your name in the upper right and choose "<A href="#/properties">Manage Properties</A>"</li>
            <li>Find the subject or comp property (note: if you can only see your subject property but no comps, click the "+" to the left of your subject property)</li>
            <li>Click the down arrow button on the right of the property and select "Edit Property". This will open up the Edit Property wizard.</li>
            <li>Click on the "Floor Plans" tab
        </ol>
    </div>
</div>