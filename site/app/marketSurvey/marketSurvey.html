<Style>
    @media all and (min-width: 0px) and (max-width: 767px) {
        .modal-body {
            padding-left:3px !important;
            padding-right:3px !important;
        }

        .modal-dialog {
            margin:0px !important;
        }
    }

    .survey-value {
        width:54px;height:25px;display: inline;padding-left:2px;padding-right:3px;text-align:right;padding-top:2px
    }

    .survey-values tr {
        height:36px
    }

</Style>

<div ng-show="!localLoading" style="display:block;width:100px;margin:50px auto">
    <img src="/images/squares.gif" style="width:100px">
</div>
<div ng-show="localLoading">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button>
        <h2 class="modal-title">Market Survey: {{property.name}}</h2>
    </div>
    <div class="modal-body" style="padding:0px 14px 14px 14px">
        <div ng-show="hasContact" style="color:#777">
            <b>Contact: </b>
            <span ng-show="hasName"> {{property.contactName}}</span>
            <span ng-show="hasEmail"> {{property.contactEmail}}</span>
            <span ng-show="hasPhone"> {{property.phone}}</span>
        </div>

        <hr style="margin:14px 0px;border-color:#4460a9">

        <div class="alert alert-warning" ng-if="editMode">
            <b>Note:</b> You are modifying historical data of a Market Survey taken on <b>{{editDate | date : 'shortDate'}}</b>
        </div>

        <toggle-switch checked="$root.me.settings.monthlyConcessions" click-fn="toggleConcessions()"></toggle-switch>&nbsp;&nbsp;Detailed Concessions
        <toggle-switch checked="settings.showNotes" click-fn="toggleNotes()"></toggle-switch>&nbsp;&nbsp;Market Survey Notes<br>
        <div style="margin-top:10px"></div>
        <div ng-if="settings.showNotes">
        <textarea class="form-control" placeholder="Type Market Survey notes here" ng-model="survey.notes"></textarea><br>
        </div>
        <table class="table table-condensed table-striped table-hover survey-values" style="margin-bottom:10px">
            <tbody>
            <tr class="thead">
                <th><span class="hidden-xs">Type</span><span class="visible-xs">F.P.</span></th>
                <th class="hidden-xs">Desc.</th>
                <th style="text-align: center"><span class="hidden-xs">Units</span><span class="visible-xs">#</span></th>
                <th style="text-align: center">Sqft</th>
                <th style="white-space: nowrap;text-align:center">Rent <i class="fa fa-info-circle" style="font-size:12px"
                 popover-trigger="mouseenter"
                 popover-placement="left"
                 popover="Enter the current gross floor-plan rent, before any concessions or discounts. If the floor plan has a range, please enter minimum price."
                        ></i></th>
                <th style="white-space: nowrap;text-align:left" colspan="2">Concess. <i class="fa fa-info-circle"  style="font-size:12px"
                 popover-trigger="mouseenter"
                 popover-placement="left"
                 popover="Enter the offered rent discount, such as one-time concession, Look-and-Lease special, amortized concession, or any other rent discount offer over a 12 month lease term. Ex: $100 off per month, enter as $1,200 value, or $500 look-and-lease for signing a 12 month lease, enter as $500. For any waived fees, please enter under Fees & Deposits."
                        ></i></th>
            </tr>

            <tr ng-repeat="row in survey.floorplans">
                <td>
                    {{row.bedrooms}}x{{row.bathrooms}}
                </td>
                <td class="hidden-xs">
                    {{row.description}}
                </td>
                <td style="text-align: center">
                    {{row.units}}
                </td>
                <td style="text-align: center">
                    {{row.sqft}}
                </td>
                <td style="white-space: nowrap;text-align:right;">
                    $<input type="number" class="form-control input-sm survey-value" ng-model="row.rent" input-mask="9{1,5}" ng-enter="next(row,'rent-' + row.id)" id="rent-{{row.id}}" onclick="select()">
                </td>
                <td style="white-space: nowrap;text-align:right">
                    $<input type="number" class="form-control input-sm survey-value" ng-model="row.concessions"  input-mask="9{1,5}" ng-enter="next(row,'concessions-' + row.id)" id="concessions-{{row.id}}" onclick="select()">
                </td>
                <td>
                    <i ng-if="row.warning" class="fa fa-info-circle" style="color:orange"
                       popover-trigger="mouseenter"
                       popover-placement="left"
                       popover="The Net Eff. Rent for this floor plan has changed by more than 10% since the last market survey"

                    ></i>&nbsp;

                    <a href ng-click="undo(row)" ng-if="row.updated"><i class="fa fa-undo" tooltip="Undo"></i></a>
                </td>
            </tr>
            <tr>
                <td>

                </td>
                <td class="hidden-xs">

                </td>

                <td colspan="3">
                    <b>Occupancy %</b>
                </td>
                <td style="text-align: right">
                    <input type="number" min = "0" max="100" class="form-control input-sm survey-value" ng-model="survey.occupancy"   ng-enter="next('occupancy','occupancy')" id="occupancy" onclick="select()">
                </td>
                <td>
                    <i ng-if="occupancyWarning" class="fa fa-info-circle" style="color:orange"
                       popover-trigger="mouseenter"
                       popover-placement="left"
                       popover="Occupancy % has changed by more than 10% since the last market survey"

                    ></i>&nbsp;
                    <a href ng-click="undo('occupancy')" ng-if="survey.occupancyupdated"><i class="fa fa-undo" tooltip="Undo"></i></a>
                </td>
            </tr>
            <tr ng-if="$root.me.settings.showLeases">
                <td>

                </td>
                <td class="hidden-xs">

                </td>

                <td colspan="3">
                    <b>Leased %</b>
                </td>
                <td style="text-align: right">
                    <input type="number" min = "0" max="100" class="form-control input-sm survey-value" ng-model="survey.leased" ng-enter="next('leased','leased')" id="leased" onclick="select()">
                </td>
                <td>
                    <i ng-if="leasedWarning" class="fa fa-info-circle" style="color:orange"
                       popover-trigger="mouseenter"
                       popover-placement="left"
                       popover="Leased % has changed by more than 10% since the last market survey"

                    ></i>&nbsp;
                    <a href ng-click="undo('leased')" ng-if="survey.leasedupdated"><i class="fa fa-undo" tooltip="Undo"></i></a>
                </td>
            </tr>
            <tr>
                <td>

                </td>
                <td class="hidden-xs">

                </td>

                <td colspan="3">
                    <b>Traffic/Week</b>
                </td>
                <td style="text-align: right">
                    <input type="number" class="form-control input-sm survey-value" ng-model="survey.weeklytraffic" input-mask="9{1,3}" ng-enter="next('traffic','traffic')" id="traffic" onclick="select()">
                </td>
                <td>
                    <a href ng-click="undo('traffic')" ng-if="survey.trafficupdated"><i class="fa fa-undo" tooltip="Undo"></i></a>
                </td>
            </tr>
            <tr>
                <td>

                </td>
                <td class="hidden-xs">

                </td>

                <td colspan="3">
                    <b>Leases/Week</b>
                </td>
                <td style="text-align: right">
                    <input type="number" class="form-control input-sm survey-value" ng-model="survey.weeklyleases"  input-mask="9{1,3}" ng-enter="next('leases','leases')" id="leases" onclick="select()">
                </td>
                <td>
                    <a href ng-click="undo('leases')" ng-if="survey.leasesupdated"><i class="fa fa-undo" tooltip="Undo"></i></a>
                </td>
            </tr>
            </tbody>
        </table>
        <div style="text-align: center">
        <button class="btn btn-warning contact-submit" ng-click="create()">Save Changes</button>
        </div>

    </div>
</div>