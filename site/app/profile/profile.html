
<div class="row" ng-show="localLoading">
    <div class="col-xs-7 col-sm-7">
        <h2 class="mainheader">{{property.name}}</h2>
    </div>
    <div class="col-xs-5 col-sm-5 hidden-print">
        <div class="btn-group pull-right" style="padding-bottom:10px">
            <button tooltip="Print/Export" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false" id = "export">
                <i class="fa fa-download visible-xs-inline"></i> <span class="hidden-xs">Print/Export</span> <span class="caret"></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                <li><a href ng-click="print(false)"><i class="fa fa-print"></i> Print: Property Profile</a></li>
                <li><a href ng-click="print(true)"><i class="fa fa-print"></i> Print: Property Profile + Comps</a></li>
                <li><a href ng-click="pdf(false)"><i class="fa fa-file-pdf-o" style="color:#ed110a"></i> Export Pdf: Property Profile</a></li>
                <li><a href ng-click="pdf(true)"><i class="fa fa-file-pdf-o" style="color:#ed110a"></i> Export Pdf: Property Profile + Comps</a></li>
                <li><a href ng-click="excel()"><i class="fa fa-file-excel-o" style="color:#32742a"></i> Export Excel: Property Profile + Comps</a></li>
            </ul>
        </div>
        <button ng-if="canManage"tooltip="Market Survey" type="button" style="margin-right:10px" class="btn btn-primary pull-right" data-toggle="dropdown" aria-expanded="false" ng-click="marketSurvey(property._id)">
            <i class="fa fa-edit visible-xs-inline"></i> <span class="hidden-xs">Market Survey</span>
        </button>
    </div>
</div>
<div class="row" ng-show="localLoading">
    <hr style="border-color:#ddd">
</div>
<div ng-show="!localLoading" style="display:block;width:100px;margin:50px auto">
    <img src="/images/squares.gif" style="width:100px">
</div>
<div class="row" ng-show="localLoading">

    <div class="hidden-print alert alert-{{comp.survey.tier}}" role="alert" ng-if="comp.survey.tier" style="margin:0px 15px 20px 15px">
        <span ng-if="comp.survey && comp.survey.date">Property has not been updated in {{comp.survey.days | number : 0}} days.</span>
        <span ng-if="!comp.survey || !comp.survey.date">Property has NEVER been updated.</span>
    </div>

    <div class="col-md-4 col-sm-5 col-lg-3 left-print">
        <div class="panel panel-info">
            <div class="panel-heading">Property Info</div>
            <div class="panel-body">
                <hr>
                <property-profile property="property"></property-profile>
            </div>
        </div>
        <div class="panel panel-info" ng-show="property.community_am.length > 0">
            <div class="panel-heading">Community Amenities</div>
            <div class="panel-body">
                <hr>
                <property-amenities amenities="property.community_am"></property-amenities>
            </div>
        </div>
        <div class="panel panel-info" ng-show="property.location_am.length > 0">
            <div class="panel-heading">Location Amenities</div>
            <div class="panel-body">
                <hr>
                <property-amenities amenities="property.location_am"></property-amenities>
            </div>
        </div>
        <div class="panel panel-info" ng-show="property.floorplan_am.length > 0">
            <div class="panel-heading">Unit Amenities</div>
            <div class="panel-body">
                <hr>
                <property-amenities amenities="property.floorplan_am"></property-amenities>
            </div>
        </div>
        <div class="panel panel-info" ng-show="property.hasFees">
            <div class="panel-heading">Fees, Deposits, Lease Terms</div>
            <div class="panel-body">
                <hr>
                <property-fees fees="property.fees" lookups="lookups.fees"></property-fees>
            </div>
        </div>
    </div>
    <div class="col-md-8 col-sm-7 col-lg-9 right-print">

        <div class="panel panel-info" ng-show="property.hasContact || property.hasNotes">
            <div class="panel-heading">About Property</div>
            <div class="panel-body">
                <hr>
                <property-about property="property"></property-about>
            </div>
        </div>


        <div class="panel panel-info">
            <div class="panel-heading">
                <span class="pull-left">Trends</span>
                <span class="dropdown pull-left hidden-print">
                    <a href class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-gear" style="color:#777;font-size:20px;padding:2px 0px 0px 5px"></i></a>
                    <div class="dropdown-menu dropdown-menu-left"  onclick="event.stopPropagation();" style="padding: 10px;width:210px">
                        <table>
                            <Tr>
                                <Td>
                                    Graphs:
                                </Td>
                                <td>
                                    <toggle-switch checked="graphs"></toggle-switch>
                                </td>
                            </Tr>
                            <Tr>
                                <Td>
                                    Hide Excluded:

                                    <i class="fa fa-info-circle" style="font-size:12px"
                                       popover-trigger="mouseenter"
                                       popover-placement="top"
                                       popover="This option gives you the ability to show excluded floor plans."
                                            ></i>
                                </Td>
                                <td>
                                    <toggle-switch checked="$root.me.settings.hideUnlinked" click-fn="toggleUnlniked()"></toggle-switch>
                                </td>
                            </Tr>
                        </table>
                    </div>
                </span>

                <i class="fa fa-exclamation-triangle" class="pull-left"
                   style="color:orange;cursor:pointer;font-size:17px;padding:5px 0px 0px 1px"
                   ng-if="points.excluded"
                   popover-trigger="mouseenter"
                   popover-placement="right"
                   popover="This graph has some floor plans that have been manually excluded from reporting and dashboard calculations."
                        ></i>

                <daterange-picker daterange="daterange" class="pull-right" style="margin-right:-15px"></daterange-picker>
                <span class="pull-right hidden-xs" style="font-weight:initial !important; font-size: 13px !important; color: initial !important;margin:5px 5px 0px 0px">Date Range: </span>
                <br clear="all">
            </div>
            <div class="panel-body">
                <hr>
                <div ng-show="!trendsLoading" style="display:block;width:100px;margin:50px auto">
                    <img src="/images/squares.gif" style="width:100px">
                </div>
                <div ng-show="trendsLoading">
                    <div ng-if="graphs">
                        <time-series options="nerData"></time-series>
                        <hr style="margin:50px 0px 30px 0px !important;">
                    </div>

                    <div ng-if="!graphs">
                        <table-view data="otherTable" columns="nerKeys" survey="canManage" propertyid="property._id" marketsurvey="marketSurvey"></table-view>
                        <hr style="margin:30px 0px 50px 0px !important;">
                    </div>
                </div>


                <div ng-show="!trendsLoading" style="display:block;width:100px;margin:50px auto">
                    <img src="/images/squares.gif" style="width:100px">
                </div>
                <div ng-show="trendsLoading">
                    <div class="row" style="margin-left:-25px" ng-if="graphs">
                        <div class="col-xs-6">
                            <time-series options="occData"></time-series>
                        </div>
                        <div class="col-xs-6">
                            <time-series options="otherData"></time-series>
                        </div>
                    </div>
                    <div ng-if="!graphs">
                        <table-view data="otherTable" columns="['occupancy', 'leases', 'traffic']" survey="canManage" propertyid="property._id" marketsurvey="marketSurvey"></table-view>
                    </div>
                </div>
            </div>
        </div>


        <div class="panel panel-info">
            <div class="panel-heading">
                <span class="pull-left">Floor Plans</span>
                <span class="dropdown pull-left hidden-print">
                    <a href class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-gear" style="color:#777;font-size:20px;padding:2px 0px 0px 5px"></i></a>
                    <div class="dropdown-menu dropdown-menu-left"  onclick="event.stopPropagation();" style="padding: 10px;width:210px">
                        <table>
                            <Tr>
                                <Td>
                                    Hide Excluded:

                                    <i class="fa fa-info-circle" style="font-size:12px"
                                       popover-trigger="mouseenter"
                                       popover-placement="top"
                                       popover="This option gives you the ability to show excluded floor plans."
                                            ></i>
                                </Td>
                                <td>
                                    <toggle-switch checked="$root.me.settings.hideUnlinked" click-fn="toggleUnlniked()"></toggle-switch>
                                </td>
                            </Tr>
                        </table>
                    </div>

                </span>
                <Br clear="all">
            </div>
            <div class="panel-body">
                <div style="height:25px"></div>
                <property-floorplans comp="comp"></property-floorplans>
            </div>
        </div>

    </div>

</div>
