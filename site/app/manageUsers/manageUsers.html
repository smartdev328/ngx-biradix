<h2 class="hasSidenav">Manage Users</h2>
<Style>

    @media all and (min-width: 0px) and (max-width: 380px) {
        .grid-right-nav {
            margin-top:10px;
            padding-left:5px
        }
        .grid-limit {
            float:right  !important;
        }
    }

    @media all and (min-width: 0px) and (max-width: 1024px) {
        .grid-pager {
            float: left !important;
        }

        .grid-show {
            margin-right:50px;
            margin-bottom:10px
        }
    }

    @media all and (min-width: 0px) and (max-width: 767px) {

     .grid-right-nav {
         float:left;
     }

        .grid-limit {

        }
        .grid-right-nav  .has-feedback {
            margin-left:3px !important;
            width:120px !important;
        }

    }

    .grid-right-nav  .has-feedback {
        margin-left:5px;
        width: 160px;
    }
</Style>
<alert ng-repeat="alert in alerts" type="{{alert.type}}" close="alerts.splice($index, 1);"><div ng-bind-html="alert.msg | sanitize"></div></alert>
<div ng-show="!localLoading" style="display:block;width:100px;margin:50px auto">
    <img src="/images/squares.gif" style="width:100px">
</div>
<div ng-show="localLoading">
        <div style="float:left" class="grid-limit">
            <select class="form-control input-sm" ng-model="limit" style="width:75px"
                    ng-change="resetPager()"
                    ng-options="item for item in limits">
            </select>
        </div>

        <div style="float:right" class="grid-right-nav">
            <div class="form-group has-feedback pull-right">
                <div class="btn-group action_dropdown stay_open_button">
                    <button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" aria-expanded="false" tooltip="Show/Hide Columns">
                        <span class="fa fa-table"></span> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-right" role="menu" style="padding-left:10px" onclick="event.stopPropagation();">
                        <li><div class="checkbox"><label><input type="checkbox" ng-model="show.rownumber" ng-checked="show.rownumber" ng-click="columnsChanged=true"> Row Number</label></div></li>
                        <li><div class="checkbox"><label><input type="checkbox" ng-model="show.date" ng-checked="show.date" ng-click="columnsChanged=true"> Date</label></div></li>
                        <li><div class="checkbox"><label><input type="checkbox" ng-model="show.name" ng-checked="show.name" ng-click="columnsChanged=true"> Name</label></div></li>
                        <li><div class="checkbox"><label><input type="checkbox" ng-model="show.email" ng-checked="show.email" ng-click="columnsChanged=true"> Email</label></div></li>
                        <li><div class="checkbox"><label><input type="checkbox" ng-model="show.role" ng-checked="show.role" ng-click="columnsChanged=true"> Role</label></div></li>
                        <li><div class="checkbox"><label><input type="checkbox" ng-model="show.company" ng-checked="show.company" ng-click="columnsChanged=true"> Company</label></div></li>
                        <li><div class="checkbox"><label><input type="checkbox" ng-model="show.active" ng-checked="show.active" ng-click="columnsChanged=true"> Active</label></div></li>
                        <li><div class="checkbox"><label><input type="checkbox" ng-model="show.tools" ng-checked="show.tools" ng-click="columnsChanged=true"> Actions</label></div></li>
                    </ul>
                </div>
                <div class="btn-group action_dropdown">
                    <button type="button" class="btn btn-default dropdown-toggle btn-sm" tooltip="Download Results" ng-click="download()">
                        <span class="fa fa-download"></span>
                    </button>
                </div>
                <div class="btn-group action_dropdown">
                    <button type="button" class="btn btn-default dropdown-toggle btn-sm" tooltip="Add User" ng-click="edit(0)">
                        <span class="fa fa-plus"></span>
                    </button>
                </div>
            </div>

            <div class="form-group has-feedback pull-right">
                <input type="text" class="form-control input-sm"
                       placeholder="Search Users"
                       ng-model="searchText"
                       ng-change="resetPager()">
                <i class="fa fa-search form-control-feedback" style="color:#ccc"></i>
            </div>
        </div>


    <table class="table table-condensed table-striped" style="margin-bottom:10px">
        <thead>
        <tr>
            <th ng-show="show.rownumber">#</th>
            <th ng-show="show.date" style="cursor:pointer" ng-click="toggleSort('date')">
                <div class="pull-left">Date</div>
                <div class="pull-right" style="width:15px" ng-show="sort.date == null"><i class="fa fa-sort" style="color:#E0E0E0"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.date === true"><i class="fa fa-sort-down"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.date === false"><i class="fa fa-sort-up"></i></div>
            </th>
            <th ng-show="show.name" style="cursor:pointer" ng-click="toggleSort('name')">
                <div class="pull-left">Name</div>
                <div class="pull-right" style="width:15px" ng-show="sort.name == null"><i class="fa fa-sort" style="color:#E0E0E0"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.name === true"><i class="fa fa-sort-down"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.name === false"><i class="fa fa-sort-up"></i></div>
            </th>
            <th ng-show="show.email" style="cursor:pointer" ng-click="toggleSort('email')">
                <div class="pull-left">Email</div>
                <div class="pull-right" style="width:15px" ng-show="sort.email == null"><i class="fa fa-sort" style="color:#E0E0E0"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.email === true"><i class="fa fa-sort-down"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.email === false"><i class="fa fa-sort-up"></i></div>
            </th>
            <th ng-show="show.role" style="cursor:pointer" ng-click="toggleSort('role')">
                <div class="pull-left">Role</div>
                <div class="pull-right" style="width:15px" ng-show="sort.role == null"><i class="fa fa-sort" style="color:#E0E0E0"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.role === true"><i class="fa fa-sort-down"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.role === false"><i class="fa fa-sort-up"></i></div>
            </th>
            <th ng-show="show.company" style="cursor:pointer;min-width:100px" ng-click="toggleSort('company')">
                <div class="pull-left">Company</div>
                <div class="pull-right" style="width:15px" ng-show="sort.company == null"><i class="fa fa-sort" style="color:#E0E0E0"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.company === true"><i class="fa fa-sort-down"></i></div>
                <div class="pull-right" style="width:15px" ng-show="sort.company === false"><i class="fa fa-sort-up"></i></div>
            </th>
            <th ng-show="show.active" style="cursor:pointer;min-width:70px;width:75px" ng-click="toggleFilter('active')">
                <div class="pull-left">Active</div>
                <div class="pull-right" style="width:15px" ng-show="filters.active == null"><i class="fa fa-filter" style="color:#E0E0E0"></i></div>
                <div class="pull-right" style="width:15px" ng-show="filters.active === true"><i class="fa fa-toggle-on"></i></div>
                <div class="pull-right" style="width:15px" ng-show="filters.active === false"><i class="fa fa-toggle-off"></i></div>

            </th>
            <th ng-show="show.tools" class="center"></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="row in filtered = (data | filter: search | filter : searchFilter) | skip : pageStart() - 1 | limitTo : limit | orderBy : orderBy">
            <td ng-show="show.rownumber">{{pageStart() + $index}}.</td>
            <td ng-show="show.date">{{row.date | date: 'shortDate'}}</td>
            <td ng-show="show.name">{{row.name}}</td>
            <td ng-show="show.email">{{row.email}}</td>
            <td ng-show="show.role">{{row.role}}</td>
            <td ng-show="show.company">{{row.company}}</td>
            <td ng-show="show.active" class="center">
                <span class="fa fa-check fa-2x success" ng-show="row.active"></span>
                <span class="fa fa-times fa-2x danger" ng-show="!row.active"></span>
            </td>
            <td ng-show="show.tools" class="center">
                <div class="form-group has-feedback pull-right" style="margin-bottom:0px; margin-right:5px" ng-show="row._id != me._id">
                    <div class="btn-group action_dropdown">
                        <button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown" aria-expanded="false" style="padding:2px 5px 0px 5px">
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right skinny" role="menu">
                            <!--<li><a href style="text-decoration:none" ng-click="edit(row.UserId)"><span class="fa fa-edit"></span> Edit User</a></li>-->
                            <li><a href ng-click="toggleActive(row)" ng-show="me.permissions.indexOf('Users/Deactivate') > -1 && !row.active" style="text-decoration:none"><span class="fa fa-check"></span> Activate</a></li>
                            <li><a href ng-click="toggleActive(row)" ng-show="me.permissions.indexOf('Users/Deactivate') > -1 && row.active" style="text-decoration:none"><span class="fa fa-times"></span> De-activate</a></li>
                            <li><a href ng-click="loginAs(row._id)" ng-show="me.permissions.indexOf('Users/LogInAs') > -1 && row.active"><span class="fa fa-key"></span> Login As</a></li>
                        </ul>
                    </div>
                </div>
            </td>
        </tr>
        </tbody>

    </table>

    <div class="pull-left grid-show" style="padding-top:5px;">
        Showing {{pageStart()}} to {{pageEnd()}} of {{filtered.length}}
        <span ng-show="filtered.length < data.length">(filtered from {{data.length}})</span>
    </div>
    <div class="pull-right grid-pager">
        <pagination ng-show="filtered.length > limit" max-size="5" total-items="filtered.length" ng-model="currentPage" class="pagination-sm" items-per-page="limit" style="margin-top:0px"></pagination>
    </div>
    <br clear="all" />
    <br ng-show="filtered.length <= limit" />
</div>
