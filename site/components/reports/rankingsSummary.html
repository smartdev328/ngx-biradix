<div class="break2 panel panel-info">
    <div class="panel-heading">Floor Plan Comparison Report
        <i ng-if="subject.isCustom" class="custom_property">(custom property)</i>
        <div style="font-weight: normal;font-size:13px; margin-top:5px;" ng-if="report.appliedPerspective">Perspective Applied: <b>{{report.appliedPerspective.name}}</b>
            <i class="fa fa-question-circle"
               style="cursor:pointer;font-size:12px;padding-left:2px;vertical-align:middle;margin-top: -3px;"
               popover-trigger="'mouseenter'"
               popover-placement="right"
               popover-append-to-body="true"
               uib-popover-html="'Data views are calculated based on the floor plans included in the perspective.'"
            ></i>
        </div>
    </div>
    <div class="panel-body">
        <hr>
        <div class="maingrid wrapper panel" style="overflow-x:auto">
    <div class="header" style="height:47px !important;"></div>
    <table class="table table-condensed table-striped table-hover hidden-arrows" style="font-size:9pt">
    <tbody>
    <tr class="thead">
        <th ng-click="toggleSort('name')" style="height:45px" class="sortable">
            Property
            <i ng-show="sort.name == null" class="fa fa-sort"></i>
            <i ng-show="sort.name === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.name === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('units')" style="min-width:60px" ng-if="show.units">
            Units
            <i ng-show="sort.units == null" class="fa fa-sort"></i>
            <i ng-show="sort.units === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.units === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('unitpercent')" style="min-width:60px" ng-if="show.unitPercent">
            Unit %
            <i ng-show="sort.unitpercent == null" class="fa fa-sort"></i>
            <i ng-show="sort.unitpercent === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.unitpercent === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('sqft')" style="min-width:60px" ng-if="show.sqft">
            Sqft
            <i ng-show="sort.sqft == null" class="fa fa-sort"></i>
            <i ng-show="sort.sqft === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.sqft === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('rent')" style="min-width:60px" ng-if="show.rent">
            Rent
            <i ng-show="sort.rent == null" class="fa fa-sort"></i>
            <i ng-show="sort.rent === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.rent === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('mersqft')" style="min-width:60px" ng-if="show.mersqft">
            Rent/<Br>Sqft
            <i ng-show="sort.mersqft == null" class="fa fa-sort"></i>
            <i ng-show="sort.mersqft === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.mersqft === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('concessionsOneTime')" style="min-width:70px" ng-if="show.concessionsOneTime">
            One-Time<br>Concess.
            <i ng-show="sort.concessionsOneTime == null" class="fa fa-sort"></i>
            <i ng-show="sort.concessionsOneTime === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.concessionsOneTime === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('concessionsMonthly')" style="min-width:70px" ng-if="show.concessionsMonthly">
            Recur.<br>Concess.
            <i ng-show="sort.concessionsMonthly == null" class="fa fa-sort"></i>
            <i ng-show="sort.concessionsMonthly === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.concessionsMonthly === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('concessions')" style="min-width:70px" ng-if="show.concessions">
            Total<br>Concess.
            <i ng-show="sort.concessions == null" class="fa fa-sort"></i>
            <i ng-show="sort.concessions === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.concessions === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('runrate')" style="min-width:70px" ng-if="show.runrate">
            Recur. Rent

            <i class="fa fa-info-circle hidden-print" style="font-size:12px"
               popover-trigger="'mouseenter'"
               popover-placement="bottom"
               uib-popover="Recurring Rent is market rent, minus recurring concessions, and excluding upfront concessions."
            ></i>

            <i ng-show="sort.runrate == null" class="fa fa-sort"></i>
            <i ng-show="sort.runrate === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.runrate === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('runratesqft')" style="min-width:80px" ng-if="show.runratesqft">
            Recur. Rent/<Br>Sqft

            <i class="fa fa-info-circle hidden-print" style="font-size:12px"
               popover-trigger="'mouseenter'"
               popover-placement="bottom"
               uib-popover="Recurring Rent is market rent, minus recurring concessions, and excluding upfront concessions."
            ></i>

            <i ng-show="sort.runratesqft == null" class="fa fa-sort"></i>
            <i ng-show="sort.runratesqft === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.runratesqft === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('ner')" style="min-width:70px" ng-if="show.ner">
            Net Eff.<br>&nbsp;Rent
            <i ng-show="sort.ner == null" class="fa fa-sort"></i>
            <i ng-show="sort.ner === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.ner === false" class="fa fa-sort-up"></i>
        </th>
        <th class="center sortable" ng-click="toggleSort('nersqft')" style="min-width:70px" ng-if="show.nersqft">
            NER/&nbsp;<Br>Sqft
            <i ng-show="sort.nersqft == null" class="fa fa-sort"></i>
            <i ng-show="sort.nersqft === true" class="fa fa-sort-down"></i>
            <i ng-show="sort.nersqft === false" class="fa fa-sort-up"></i>
        </th>
    </tr>
    <tr>
        <td colspan="100%" style="background-color: white !important;color:#4460a9;" class="fp-header">
            <div class="fp-header-div">
                <h4>Entire Property
                    <i class="fa fa-eye-slash blue"
                       style="cursor:pointer;font-size:14px;padding-left:2px"
                       ng-if="report.exclusionsEntireProperty && report.exclusionsEntireProperty.length"
                       popover-trigger="'mouseenter'"
                       popover-placement="right"
                       popover-append-to-body="true"
                       uib-popover-html="$root.showExcluded(report.appliedPerspective, report.exclusionsEntireProperty)"
                    ></i>
                </h4>
            </div>
        </td>
    </tr>

    <tr ng-repeat="fp in report.summary | orderBy : orderBy" ng-class="{'subject': fp.subject}">
        <td>
            {{fp.name}}
            <i class="fa fa-eye-slash blue"
               style="cursor:pointer;font-size:12px;padding-left:2px"
               ng-if="report.exclusionsEntirePropertyBreakdown[fp.id] && report.exclusionsEntirePropertyBreakdown[fp.id].length"
               popover-trigger="'mouseenter'"
               popover-placement="right"
               popover-append-to-body="true"
               uib-popover-html="$root.showExcluded(report.appliedPerspective, report.exclusionsEntirePropertyBreakdown[fp.id])"
            ></i>
        </td>
        <td class="center" ng-if="show.units">
            {{fp.units}}
        </td>
        <td class="center" ng-if="show.unitPercent">
            {{fp.unitpercent == 100 ? '100' : (fp.unitpercent | number : 1)}}%
        </td>
        <td class="center" ng-if="show.sqft">
            {{fp.sqft | number : 0}}
        </td>
        <td class="center" ng-if="show.rent">
            {{fp.rent | currency : "$" : 0}}
        </td>
        <td class="center" ng-if="show.mersqft">
            {{fp.mersqft | currency}}
        </td>
        <td class="center" ng-if="show.concessionsOneTime">
            <span ng-if="fp.concessionsOneTime == null">-</span>
            <span ng-if="fp.concessionsOneTime != null">{{fp.concessionsOneTime | currency : "$" : 0}}</span>
        </td>
        <td class="center" ng-if="show.concessionsMonthly">
            <span ng-if="fp.concessionsMonthly == null">-</span>
            <span ng-if="fp.concessionsMonthly != null">{{fp.concessionsMonthly | currency : "$" : 0}}</span>
        </td>
        <td class="center" ng-if="show.concessions">
            {{fp.concessions | currency : "$" : 0}}
        </td>
        <td class="center"  ng-if="show.runrate">
            {{fp.runrate | currency : "$" : 0}}
        </td>
        <td class="center" ng-if="show.runratesqft">
            {{fp.runratesqft | currency}}
        </td>
        <td class="center" ng-if="show.ner">
            {{fp.ner | currency : "$" : 0}}
        </td>
        <td class="center" ng-if="show.nersqft">
            {{fp.nersqft | currency}}
        </td>
    </tr>

    <tr class="subtotal" style="background-color:white !important;">
        <td>
            <div style="color:black !important;">Averages</div>
        </td>
        <td class="center black" ng-if="show.units">
            <div style="color:black !important;">{{report.totals.units  | number : 0}}</div>
        </td>
        <td class="center black" ng-if="show.unitPercent">
            <div style="color:black !important;">{{report.totals.unitpercent  | number : 0}}%</div>
        </td>
        <td class="center black" ng-if="show.sqft">
            <div style="color:black !important;">{{report.totals.sqft | number : 0}}</div>
        </td>
        <td class="center black" ng-if="show.rent">
            <div style="color:black !important;">{{report.totals.rent | currency : "$" : 0}}</div>
        </td>
        <td class="center black" ng-if="show.mersqft">
            <div style="color:black !important;">{{report.totals.mersqft | currency}}</div>
        </td>
        <td class="center black" ng-if="show.concessionsOneTime">
            <div style="color:black !important;" ng-if="report.totals.concessionsOneTime == null">-</div>
            <div style="color:black !important;" ng-if="report.totals.concessionsOneTime != null">{{report.totals.concessionsOneTime | currency : "$" : 0}}</div>
        </td>
        <td class="center black" ng-if="show.concessionsMonthly">
            <div style="color:black !important;" ng-if="report.totals.concessionsMonthly == null">-</div>
            <div style="color:black !important;" ng-if="report.totals.concessionsMonthly != null">{{report.totals.concessionsMonthly | currency : "$" : 0}}</div>
        </td>
        <td class="center black" ng-if="show.concessions">
            <div style="color:black !important;">{{report.totals.concessions | currency : "$" : 0}}</div>
        </td>
        <td class="center black" ng-if="show.runrate">
            <div style="color:black !important;">{{report.totals.runrate | currency : "$" : 0}}</div>
        </td>
        <td class="center black" ng-if="show.runratesqft">
            <div style="color:black !important;">{{report.totals.runratesqft | currency}}</div>
        </td>
        <td class="center black" ng-if="show.ner">
            <div style="color:black !important;">{{report.totals.ner | currency : "$" : 0}}</div>
        </td>
        <td class="center black" ng-if="show.nersqft">
            <div style="color:black !important;">{{report.totals.nersqft | currency}}</div>
        </td>
    </tr>
        <tr ng-repeat-start="(key,value) in report.rankings" ng-if="false">

        </tr>
        <tr>
            <td colspan="100%" style="background-color: white !important;color:#4460a9;" class="fp-header">
                <div class="fp-header-div">
                <h4>{{bedroomsLabel(key)}}
                    <i class="fa fa-eye-slash blue"
                       style="cursor:pointer;font-size:12px;padding-left:2px"
                       ng-if="report.exclusionsByBedrooms[key] && report.exclusionsByBedrooms[key].length"
                       popover-trigger="'mouseenter'"
                       popover-placement="right"
                       popover-append-to-body="true"
                       uib-popover-html="$root.showExcluded(report.appliedPerspective, report.exclusionsByBedrooms[key])"
                    ></i>
            </h4>
                </div>
            </td>
        </tr>
        <tr ng-repeat="fp in value.floorplans | orderBy : orderBy" ng-class="{'subject': fp.subject}">
            <td>
                {{fp.name}}
                <i class="fa fa-eye-slash blue"
                   style="cursor:pointer;font-size:12px;padding-left:2px"
                   ng-if="value.excluded[fp.id] && value.excluded[fp.id]"
                   popover-trigger="'mouseenter'"
                   popover-placement="right"
                   popover-append-to-body="true"
                   uib-popover-html="$root.showExcluded(report.appliedPerspective, value.excluded[fp.id])"
                ></i>
            </td>
            <td class="center" ng-if="show.units">
                {{fp.units}}
            </td>
            <td class="center" ng-if="show.unitPercent">
                {{fp.unitpercent == 100 ? '100' : (fp.unitpercent | number : 1)}}%
            </td>
            <td class="center" ng-if="show.sqft">
                {{fp.sqft | number : 0}}
            </td>
            <td class="center" ng-if="show.rent">
                {{fp.rent | currency : "$" : 0}}
            </td>
            <td class="center" ng-if="show.mersqft">
                {{fp.mersqft | currency}}
            </td>
            <td class="center" ng-if="show.concessionsOneTime">
                <span ng-if="fp.concessionsOneTime == null">-</span>
                <span ng-if="fp.concessionsOneTime != null">{{fp.concessionsOneTime | currency : "$" : 0}}</span>
            </td>
            <td class="center" ng-if="show.concessionsMonthly">
                <span ng-if="fp.concessionsMonthly == null">-</span>
                <span ng-if="fp.concessionsMonthly != null">{{fp.concessionsMonthly | currency : "$" : 0}}</span>
            </td>
            <td class="center" ng-if="show.concessions">
                {{fp.concessions | currency : "$" : 0}}
            </td>
            <td class="center" ng-if="show.runrate">
                {{fp.runrate | currency : "$" : 0}}
            </td>
            <td class="center" ng-if="show.runratesqft">
                {{fp.runratesqft | currency}}
            </td>
            <td class="center" ng-if="show.ner">
                {{fp.ner | currency : "$" : 0}}
            </td>
            <td class="center" ng-if="show.nersqft">
                {{fp.nersqft | currency}}
            </td>
        </tr>
        <tr class="subtotal" style="background-color:white !important;">
            <td>
                <div style="color:black !important;">Averages</div>
            </td>
            <td class="center black" ng-if="show.units">
                <div style="color:black !important;">{{value.summary.units  | number : 0}}</div>
            </td>
            <td class="center black" ng-if="show.unitPercent">
                <div style="color:black !important;">100%</div>
            </td>
            <td class="center black" ng-if="show.sqft">
                <div style="color:black !important;">{{value.summary.sqft | number : 0}}</div>
            </td>
            <td class="center black" ng-if="show.rent">
                <div style="color:black !important;">{{value.summary.rent | currency : "$" : 0}}</div>
            </td>
            <td class="center black" ng-if="show.mersqft">
                <div style="color:black !important;">{{value.summary.mersqft | currency}}</div>
            </td>
            <td class="center black" ng-if="show.concessionsOneTime">
                <div style="color:black !important;" ng-if="value.summary.concessionsOneTime == null">-</div>
                <div style="color:black !important;" ng-if="value.summary.concessionsOneTime != null">{{value.summary.concessionsOneTime | currency : "$" : 0}}</div>
            </td>
            <td class="center black" ng-if="show.concessionsMonthly">
                <div style="color:black !important;" ng-if="value.summary.concessionsMonthly == null">-</div>
                <div style="color:black !important;" ng-if="value.summary.concessionsMonthly != null">{{value.summary.concessionsMonthly | currency : "$" : 0}}</div>
            </td>
            <td class="center black" ng-if="show.concessions">
                <div style="color:black !important;">{{value.summary.concessions | currency : "$" : 0}}</div>
            </td>
            <td class="center black" ng-if="show.runrate">
                <div style="color:black !important;">{{value.summary.runrate | currency : "$" : 0}}</div>
            </td>
            <td class="center black" ng-if="show.runratesqft">
                <div style="color:black !important;">{{value.summary.runratesqft | currency}}</div>
            </td>
            <td class="center black" ng-if="show.ner">
                <div style="color:black !important;">{{value.summary.ner | currency : "$" : 0}}</div>
            </td>
            <td class="center black" ng-if="show.nersqft">
                <div style="color:black !important;">{{value.summary.nersqft | currency}}</div>
            </td>
        </tr>
        <tr ng-repeat-end ng-if="false">

        </tr>
    </tbody>

    </table>
</div>
    </div>
</div>
